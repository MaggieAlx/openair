<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='Function for importing common 1 hour average (hourly) UK Automatic Urban
and Rural Network (AURN) Air Quality Archive data files previously
downloaded in ".csv" format for use with the openair package.  The function
uses read.table (in utils) and rbind (in
reshape).'><title>AURN csv file data import for openair — importAURNCsv • openair</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="AURN csv file data import for openair — importAURNCsv"><meta property="og:description" content='Function for importing common 1 hour average (hourly) UK Automatic Urban
and Rural Network (AURN) Air Quality Archive data files previously
downloaded in ".csv" format for use with the openair package.  The function
uses read.table (in utils) and rbind (in
reshape).'><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-default navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">openair</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.12</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">News</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://bookdown.org/david_carslaw/openair/">Book</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/davidcarslaw/openair">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>AURN csv file data import for openair</h1>
      <small class="dont-index">Source: <a href="https://github.com/davidcarslaw/openair/blob/HEAD/R/importAURNCsv.R" class="external-link"><code>R/importAURNCsv.R</code></a></small>
      <div class="d-none name"><code>importAURNCsv.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Function for importing common 1 hour average (hourly) UK Automatic Urban
and Rural Network (AURN) Air Quality Archive data files previously
downloaded in ".csv" format for use with the openair package.  The function
uses <code>read.table</code> (in <code>utils</code>) and <code>rbind</code> (in
<code>reshape</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">importAURNCsv</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.choose.html" class="external-link">file.choose</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  header.at <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  data.at <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  na.strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"No data"</span>, <span class="st">""</span>, <span class="st">"NA"</span><span class="op">)</span>,</span>
<span>  date.name <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>  date.break <span class="op">=</span> <span class="st">"-"</span>,</span>
<span>  time.name <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  misc.info <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  is.site <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  bad.24 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  correct.time <span class="op">=</span> <span class="op">-</span><span class="fl">3600</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"final"</span>,</span>
<span>  data.order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"value"</span>, <span class="st">"status"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  simplify.names <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>file</dt>
<dd><p>The name of the AURN file to be imported. Default,
<code>file.choose</code> opens browser. Use of <code>read.table</code> (in
<code>utils</code>) also allows this to be a readable text-mode connection or
url (although these options are currently not fully tested).</p></dd>


<dt>header.at</dt>
<dd><p>The file row holding header information. This is used to
set names for the resulting imported data frame, but may be subject to
further modifications depending on following argument settings.</p></dd>


<dt>data.at</dt>
<dd><p>The first file row holding actual data. When generating the
data frame, the function will ignore all information before this row, and
attempt to include all data from this row onwards.</p></dd>


<dt>na.strings</dt>
<dd><p>Strings of any terms that are to be interpreted as NA
values within the file.</p></dd>


<dt>date.name</dt>
<dd><p>Header name of column holding date information. Combined
with time information as single date column in the generated data frame.</p></dd>


<dt>date.break</dt>
<dd><p>The break character separating days, months and years in
date information. For example, "-" in "01-01-2009".</p></dd>


<dt>time.name</dt>
<dd><p>Header name of column holding time information. Combined
with date information as single date column in the generated data frame.</p></dd>


<dt>misc.info</dt>
<dd><p>Row numbers of any additional information that may be
required from the original file. Each line retained as a character vector
in the generated data frame comment.</p></dd>


<dt>is.site</dt>
<dd><p>Header name of column holding site information. Setting to
NULL turns this option off.</p></dd>


<dt>bad.24</dt>
<dd><p>Reset AURN 24 time stamp. AURN time series are logged as
00:00:01 to 24:00:00 as opposed to the more conventional 00:00:00 to
23:59:59. <code>bad.24 = TRUE</code> resets the time stamp which is not allowed
in some time series classes or functions.</p></dd>


<dt>correct.time</dt>
<dd><p>Numerical correction (in seconds) for imported date.
AURN data is logged retrospectively. For 1 hour average data,
<code>correct.time = -3600</code> resets this to the start of the sampling
period.</p></dd>


<dt>output</dt>
<dd><p>Output style. Default "final" using <code><a href="import.html">import()</a></code>.</p></dd>


<dt>data.order</dt>
<dd><p>A vector of names defining the order of data types. AURN
files typically include three data types, actual data and associated data
quality and measurement unit reports. Here, these are defined as "value",
"status" and "unit", respectively.</p></dd>


<dt>simplify.names</dt>
<dd><p>A logical (default TRUE) prompting the function to
try to simply data frame names using common chemical shorthand.  FALSE
retains names from original file, although these may be modified if they
contain disallowed characters or non-unique names.</p></dd>


<dt>...</dt>
<dd><p>Other parameters. Passed onto and handled by <code><a href="import.html">import()</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The function returns a data frame for use in openair. By comparison
  to the original file, the resulting data frame is modified as follows:
  Time and date information will combined in a single column "date",
  formatted as a conventional timeseries (<code><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></code>). Time
  adjustments may also be made, subject to "bad.24" and "correct.time"
  argument settings.  Using default settings, the argument</p>
<p></p>
<p><code>correct.time = - 3600</code> resets the time stamp to the start of the
  measurement period. If name simplification was requested
  (<code>simplify.names = TRUE</code>), common chemical names will be simplified.
  For example, "carbon monoxide" will be reset to "co". Currently, this
  option only applies to inorganics and particulates, not organics.
  Non-value information will be rationalised according to data.order. For
  example, for the default, <code>data.order = c("value", "status",
  "unit")</code>, the status and unit columns following the "co" column will be
  automatically renamed "unit.co" and "status.co", respectively.  An
  additional "site" column will be generated. Multiple "site" files are
  allowed.  Additional information (as defined in "misc.info") and data
  adjustments (as defined by "bad.24" and "correct.time") are retained in
  the data frame comment.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The importAURN() function was developed for use with air quality monitoring
site data files downloaded in standard hourly (or 1 hour average) format
using the Air Quality Archive email service. Argument defaults are set to
common values to simplify both the import operation and use with openair.</p>
<p>Similar file structures can also be imported using this function with
argument modification.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Generic import function <code><a href="import.html">import</a></code>, or direct (on-line)
  data import function <code><a href="importAURN.html">importAURN</a></code>. Other dedicated import
  functions available for other file types, e.g.: <code><a href="importKCL.html">importKCL</a></code>,
  <code><a href="importADMS.html">importADMS</a></code>, etc.</p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Karl Ropkins</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span><span class="co">#example 1</span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span><span class="co">#example using data from url</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#import data as otherdata</span></span></span>
<span class="r-in"><span><span class="co">## otherdata &lt;- importAURNCsv(</span></span></span>
<span class="r-in"><span><span class="co">##  "http://www.airquality.co.uk/archive/data_files/site_data/HG1_2007.csv")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#use openair function</span></span></span>
<span class="r-in"><span><span class="co">## summarise(otherdata)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span><span class="co">#example 2</span></span></span>
<span class="r-in"><span><span class="co">##########</span></span></span>
<span class="r-in"><span><span class="co">#example of importing other similar data formats</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#import 15 min average so2 data from Bexley using url</span></span></span>
<span class="r-in"><span><span class="co">## so2.15min.data &lt;- importAURNCsv(</span></span></span>
<span class="r-in"><span><span class="co">##  "http://www.airquality.co.uk/archive/data_files/15min_site_data/BEX_2008.csv",</span></span></span>
<span class="r-in"><span><span class="co">##  correct.time = -900)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#note: correct.time amended for 15 min offset/correction.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#additional comments</span></span></span>
<span class="r-in"><span><span class="co">## comment(so2.15min.data)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#analysis</span></span></span>
<span class="r-in"><span><span class="co">## diurnal.error(so2.15min.data, pollutant="so2")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#wrapper for above operation</span></span></span>
<span class="r-in"><span><span class="co">##(e.g. if you have to do this -or similar- a lot of time)</span></span></span>
<span class="r-in"><span><span class="co">## my.import.wrapper &lt;- function(file, correct.time = -900, ...)</span></span></span>
<span class="r-in"><span><span class="co">##  { importAURNCsv(file = file, correct.time = correct.time, ...) }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#same as above</span></span></span>
<span class="r-in"><span><span class="co">## so2.15min.data.again &lt;- my.import.wrapper(</span></span></span>
<span class="r-in"><span><span class="co">##  "http://www.airquality.co.uk/archive/data_files/15min_site_data/BEX_2008.csv")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#analysis</span></span></span>
<span class="r-in"><span><span class="co">## timeVariation(so2.15min.data.again, pollutant="so2")</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David Carslaw, Karl Ropkins.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

